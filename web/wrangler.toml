name = "img2pic-web"
main = "web/workers-site/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
build = { command = "cd web && npm run build:cf && cd workers-site && npm install", cwd = "." }

[env.production]
name = "img2pic-web-prod"
routes = [
  { pattern = "i2p.sirrus.cc", custom_domain = true }
]

[env.staging]
name = "img2pic-web-staging"
routes = [
  { pattern = "staging.i2p.sirrus.cc", custom_domain = true }
]

# Assets configuration for serving static files
[site]
bucket = "./web/dist/spa"

# Environment variables
[vars]
ENVIRONMENT = "production"

# KV Namespaces (if needed)
# [[kv_namespaces]]
# binding = "MY_KV_NAMESPACE"
# id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
# preview_id = "yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"

# D1 Databases (if needed)
# [[d1_databases]]
# binding = "DB"
# database_name = "my-database"
# database_id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# R2 Buckets (if needed)
# [[r2_buckets]]
# binding = "MY_BUCKET"
# bucket_name = "my-bucket"

# Durable Objects (if needed)
# [[durable_objects.bindings]]
# name = "DURABLE_OBJECT"
# class_name = "DurableObjectExample"

# Workers AI configuration (if needed)
# [ai]
# binding = "AI"

# Queues configuration (if needed)
# [[queues.producers]]
# binding = "MY_QUEUE"
# queue_name = "my-queue"

# [[queues.consumers]]
# queue_name = "my-queue"
# max_batch_size = 10
# max_wait_time_ms = 5000

# Analytics Engine (if needed)
# [[analytics_engine_datasets]]
# binding = "MY_DATASET"

# Vectorize (if needed)
# [[vectorize]]
# binding = "VECTORIZE_INDEX"
# index_name = "my-index"